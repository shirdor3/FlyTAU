{% extends "layout_page.html" %}
{% block title %}FLYTAU - Payment{% endblock %}

{% block ruler %}
<ul class="nav-links">
  <li>
    <a href="/flight_search_guest" class="white-glow-hover">חיפוש טיסה וביצוע הזמנה</a>
  </li>
  <li>
    <a href="/sign_in_show_tickets" class="white-glow-hover">הצגת כרטיסים פעילים</a>
  </li>
</ul>
{% endblock %}

{% block page_title %}
<div class="page-head">
  <h1>תשלום</h1>
  <h2 style="font-size:20px; font-weight:400; opacity:0.9;">
    הזינו פרטי אשראי להשלמת ההזמנה
  </h2>
</div>
{% endblock %}

{% block content %}
{% if error %}
  <div class="message-banner error">{{ error }}</div>
{% endif %}

<section class="card">
  <div class="card-header">
    <h2>פרטי תשלום</h2>
    {% if total is not none %}
      <h2>סכום לתשלום: {{ "%.2f"|format(total) }} ₪</h2>
    {% endif %}
  </div>

  <form action="{{ url_for('payment_post') }}" method="post" class="register-form">
    <div class="form-group">
      <label for="card_name">שם בעל הכרטיס (אנגלית)</label>
      <input type="text" id="card_name" name="card_name" pattern="[A-Za-z ]+" required>
    </div>

    <div class="form-group">
      <label for="card_number">מספר כרטיס</label>
      <input type="text" id="card_number" name="card_number" inputmode="numeric"
             placeholder="1234 5678 9012 3456"
             pattern="[0-9 ]{12,23}" required>
    </div>

    <div style="display:grid; grid-template-columns: 1fr 1fr; gap:12px;">
      <div class="form-group">
        <label for="exp">תוקף (MM/YY)</label>
        <input type="text" id="exp" name="exp" placeholder="08/29" pattern="[0-9]{2}/[0-9]{2}" required>
      </div>

      <div class="form-group">
        <label for="cvv">CVV</label>
        <input type="password" id="cvv" name="cvv" inputmode="numeric" placeholder="123" pattern="[0-9]{3,4}" required>
      </div>
    </div>

    <button type="submit" class="btn login-btn">בצע תשלום</button>

    <div style="margin-top:10px; text-align:center;">
      <a class="btn ghost" href="{{ url_for('place_order') }}">חזרה</a>
    </div>
  </form>
</section>
{% endblock %}
